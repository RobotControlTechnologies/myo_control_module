# Модуль управления для браслета **_Myo_**
-----------------------------

Браслет **_Myo_** может получать данные напряжении мышц кисти и следовательно о жестах показываемых рукой, с последующей передачей данных на ПК.

[Подробнее о Myo](https://www.thalmic.com/en/myo/)

Данный модуль позволяет реализовать управление роботом с помощью жестов в среде RCML, посредством браслета Myo и ПК. Оси модуля частично соответствуют жестам в Myo, часть жестов была объединена в одну ось для адаптации применительно к роботу. Дополнительно модуль имеет бинарную ось, так называемой "блокировки", которая зависит от того блокирован или не блокирован браслет и которая может быть использована для блокировки робота с целью предотвращения неожидаемых движений.

Myo умеет распознавать следующие жесты по умолчанию:
- fist;
- fingers spread;
- double tap;
- wave out;
- wave in;
- rest (отсутсвие жеста, расслабленная рука)

Узнать подробнее о жестах и о том как их правильно выполнять, можно в программе Myo Connect при прохождении начального обучения пользования браслетом.

В среде RCML модуль доступен под именем **_Myo_**.
Модуль не нуждается в какой-либо настройке и подключается по умолчанию к первому браслету в системе.

-----------------------------

Для компиляции модуля потребуется [Myo SDK](https://developer.thalmic.com/downloads) и библиотека [SimpleIni](https://github.com/brofield/simpleini).

Для работы модуля потребуется браслет Myo, предварительно установленный в программе [Myo Connect](https://www.thalmic.com/start/) и откалиброванный под Вашу руку.

*Перед использованием рекомендуется поставить последние версии прошивки браслета и программы Myo Connect*

-----------------------------

####Доступные оси в модуле
Наименование  | Верхняя граница  | Нижняя граница  | Примечание
------------  | -----------------  | ------------------  | ------------------
locked  | 1  | 0  | Бинарная ось. Отражает статус браслета Myo: блокирован - 1, разблокирован - 0. 
fist  | 1  | 0  | Бинарная ось. Если наблюдается жест **_fist_** - 1, в противном случае - 0.
left_or_right  | 1  | -1  | Дискретная ось. Удобна для задания направления перемещения или поворота. Основа на жестах **_wave out_** и **_wave in_**. Автоматически определяет направление кисти в данных жестах направо или налево (независимо от того на какую руку надет браслет) и принимает следующие значения: -1 - налево, 0 - нет жеста, 1 - направо.
fingers_spread  | 1  | 0  | Бинарная ось. Если наблюдается жест **_fingers spread_** - 1, в противном случае - 0.
double_tap  | 1  | 0  | Бинарная ось. Если наблюдается жест **_double tap_** - 1, в противном случае - 0.
fist_pitch_angle  | 18  | 0  | Непрерывная ось. Отмечает угол pitch (тангаж) браслета относительно земли, при жесте **_fist_**.
fist_roll_angle  | 18  | 0  | Непрерывная ось. Отмечает угол roll (крен) браслета относительно земли, при жесте **_fist_**.
fist_yaw_angle  | 18  | 0  | Непрерывная ось. Отмечает угол yaw (рысканье) браслета относительно земли, при жесте **_fist_**.
fingers_spread_pitch_angle  | 18  | 0  | Непрерывная ось. Отмечает угол pitch (тангаж) браслета относительно земли, при жесте **fingers spread**.
fingers_spread_roll_angle  | 18  | 0  | Непрерывная ось. Отмечает угол roll (крен) браслета относительно земли, при жесте **fingers spread**.
fingers_spread_yaw_angle  | 18  | 0  | Непрерывная ось. Отмечает угол yaw (рысканье) браслета относительно земли, при жесте **fingers spread**.

####Примечания
- **Значения всех осей передаются 20 раз в секунду**.
- Значение осей с суффиксом **__angle_**, изменяется и передается только при наблюдении соответсвующего жеста.
- Если браслет блокирован, то значения всех осей жестов, кроме оси **_locked_** и осей с суффиксом **__angle_**, будут равны 0.
- Браслет блокируется автоматически, если некоторое малое время (1-2 сек) по датчикам наблюдается не известный браслету жест или наблюдается жест **_rest_**, а также если обнаружен сдвиг браслета на руке или снятие браслета с руки.
- Разблокировка браслета происходит жестом **_double tap_**, как и во многих Myo-совместимых приложениях.
- **Рекомендуется проявлять осторожность** при использовании для управления роботом одновременно оси **_fist_** или **_fingers_spread_**, и осей содержащих одноименные префиксы **_fist__** или **_fingers_spread__** соответственно, т.к. оси жестов принимают значение 1 при попытке изменения значения осей, активных при соответствующем жесте, поскольку для этого требуется появление этого жеста.